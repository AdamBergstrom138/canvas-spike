{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nexport function useOnDraw(onDraw) {\n  _s();\n  const canvasRef = useRef(null);\n  const isDrawingRef = useRef(false);\n  const mouseMoveListenerRef = useRef(null);\n  const mouseDownListenerRef = useRef(null);\n  const mouseUpListenerRef = useRef(null);\n  useEffect(() => {\n    return () => {\n      if (mouseMoveListenerRef.current) {\n        window.removeEventListener(\"mousemove\", mouseMoveListenerRef.current);\n      }\n      if (mouseMoveListenerRef.current) {\n        window.removeEventListener(\"mousemove\", mouseMoveListenerRef.current);\n      }\n    };\n  }, []);\n  function setCanvasRef(ref) {\n    if (!ref) return;\n    canvasRef.current.removeEventListener(\"mousedown\", mouseDownListenerRef.current);\n    canvasRef.current = ref;\n    initmouseMoveListener();\n    initMouseDownListener();\n    initMouseUpListener();\n  }\n  function initmouseMoveListener() {\n    const mouseMoveListener = e => {\n      if (isDrawingRef.current) {\n        // console.log({ x : e.clientX, y : e.clientY});\n        const point = computePointInCanvas(e.clientX, e.clientY);\n        const ctx = canvasRef.current.getContext('2d');\n        if (onDraw) onDraw(ctx, point);\n        console.log(point);\n      }\n    };\n    mouseMoveListenerRef.current = mouseMoveListener;\n    window.addEventListener(\"mousemove\", mouseMoveListener);\n  }\n  function initMouseUpListener() {\n    const listener = () => {\n      isDrawingRef.current = false;\n    };\n    mouseUpListenerRef.current = listener;\n    window.addEventListener(\"mouseup\", listener);\n  }\n  function initMouseDownListener() {\n    if (!canvasRef.current) return;\n    const listener = () => {\n      isDrawingRef.current = true;\n    };\n    mouseDownListenerRef.current = listener;\n    canvasRef.current.addEventListener(\"mousedown\", listener);\n  }\n  function computePointInCanvas(clientX, clientY) {\n    if (canvasRef.current) {\n      const boundingRect = canvasRef.current.getBoundingClientRect();\n      return {\n        x: clientX - boundingRect.left,\n        y: clientY - boundingRect.top\n      };\n    } else {\n      return null;\n    }\n  }\n  return setCanvasRef;\n}\n_s(useOnDraw, \"eVCpjS4KqCropBSa8+sN4+9SJJg=\");","map":{"version":3,"names":["useEffect","useRef","useOnDraw","onDraw","canvasRef","isDrawingRef","mouseMoveListenerRef","mouseDownListenerRef","mouseUpListenerRef","current","window","removeEventListener","setCanvasRef","ref","initmouseMoveListener","initMouseDownListener","initMouseUpListener","mouseMoveListener","e","point","computePointInCanvas","clientX","clientY","ctx","getContext","console","log","addEventListener","listener","boundingRect","getBoundingClientRect","x","left","y","top"],"sources":["/Users/adambergstrom/Documents/Prime FS Engineering/Prime Tier 2/Week 8/canvas-drawing/canvas-drawing/src/Components/Hooks.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\n\nexport function useOnDraw(onDraw) {\n\n    const canvasRef = useRef(null);\n    const isDrawingRef = useRef(false);\n\n    const mouseMoveListenerRef = useRef(null);\n    const mouseDownListenerRef = useRef(null);\n    const mouseUpListenerRef = useRef(null);\n\n    useEffect(() => {\n        return () => {\n            if(mouseMoveListenerRef.current){\n                window.removeEventListener(\"mousemove\", mouseMoveListenerRef.current)\n            }\n            if(mouseMoveListenerRef.current){\n                window.removeEventListener(\"mousemove\", mouseMoveListenerRef.current)\n            }\n        }\n    }, []);\n\n    function setCanvasRef(ref) {\n        if(!ref) return;\n        canvasRef.current.removeEventListener(\"mousedown\", mouseDownListenerRef.current);\n        canvasRef.current = ref;\n        initmouseMoveListener();\n        initMouseDownListener();\n        initMouseUpListener();\n    }\n\n    function initmouseMoveListener(){\n        const mouseMoveListener = (e) => {\n            if(isDrawingRef.current){\n                // console.log({ x : e.clientX, y : e.clientY});\n                const point = computePointInCanvas(e.clientX, e.clientY);\n                const ctx = canvasRef.current.getContext('2d');\n                if(onDraw) onDraw(ctx, point);\n                console.log(point);\n            }\n        }\n        mouseMoveListenerRef.current = mouseMoveListener;\n        window.addEventListener(\"mousemove\", mouseMoveListener);\n    }\n\n    function initMouseUpListener() {\n        const listener = () => {\n            isDrawingRef.current = false;\n        }\n        mouseUpListenerRef.current = listener;\n        window.addEventListener(\"mouseup\", listener)\n    }\n\n    function initMouseDownListener(){\n        if(!canvasRef.current) return;\n        const listener = () => {\n            isDrawingRef.current = true;\n\n        }\n        mouseDownListenerRef.current = listener;\n        canvasRef.current.addEventListener(\"mousedown\", listener);\n    }\n\n    function computePointInCanvas(clientX, clientY) {\n        if(canvasRef.current){\n\n        const boundingRect = canvasRef.current.getBoundingClientRect();\n        return{\n            x : clientX - boundingRect.left ,\n            y : clientY - boundingRect.top\n        }\n    } else {\n        return null;\n    }\n    }\n\n    return setCanvasRef;\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}